{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utility/request\";\nexport default {\n  data() {\n    return {\n      sizeForm: {\n        userName: '',\n        password: '',\n        accountType: \"消费者\"\n      },\n      rules: {\n        userName: [{\n          required: true,\n          message: '用户名不能为空',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }, {\n          min: 8,\n          max: 20,\n          message: '长度在 8 到 20 个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    onSubmit() {\n      return request.post(\"http://localhost:8080/user/login\", this.sizeForm).then(result => {\n        let jwt = result.data;\n        //后端返回的信息(用户ID)\n        let msg = result.msg;\n        //登录成功,保存登录之后的令牌和用户名,以及用户ID和账号类型\n        if (jwt != null) {\n          localStorage.setItem(\"token\", jwt);\n          localStorage.setItem(\"userInfo\", JSON.stringify({\n            'userName': this.sizeForm.userName,\n            'userID': parseInt(msg),\n            \"accountType\": this.sizeForm.accountType\n          }));\n          //网页重定向到个人空间\n          this.$message.success(\"登录成功，已进入个人空间\");\n          this.$router.push(\"/userSpace\");\n        } else {\n          this.$message.error(\"登录失败，请检查输入数据\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","data","sizeForm","userName","password","accountType","rules","required","message","trigger","min","max","methods","onSubmit","post","then","result","jwt","msg","localStorage","setItem","JSON","stringify","parseInt","$message","success","$router","push","error"],"sources":["src/views/register_login/loginView.vue"],"sourcesContent":["<template>\r\n  <el-form class=\"login-container\" :rules=\"rules\" ref=\"ruleForm\" :model=\"sizeForm\" label-width=\"80px\">\r\n    <el-form-item class=\"login-item\" label=\"用户名\" prop=\"userName\">\r\n      <el-input placeholder=\"请设置用户名\" v-model=\"sizeForm.userName\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"密码\" prop=\"password\">\r\n      <el-input placeholder=\"请设置密码\" v-model=\"sizeForm.password\" show-password></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"账号类型\">\r\n      <el-radio-group v-model=\"sizeForm.accountType\">\r\n        <el-radio-button label=\"消费者\"></el-radio-button>\r\n        <el-radio-button label=\"商家\"></el-radio-button>\r\n      </el-radio-group>\r\n    </el-form-item>\r\n    <el-form-item size=\"large\">\r\n      <el-button type=\"primary\" @click=\"onSubmit\">登录</el-button>\r\n      <el-button>取消</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n<script>\r\n\r\nimport request from \"@/utility/request\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      sizeForm: {\r\n        userName: '',\r\n        password: '',\r\n        accountType: \"消费者\"\r\n      },\r\n      rules: {\r\n        userName: [\r\n          {required: true, message: '用户名不能为空', trigger: 'blur'},\r\n          {min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur'}\r\n        ],\r\n        password: [\r\n          {required: true, message: '密码不能为空', trigger: 'blur'},\r\n          {min: 8, max: 20, message: '长度在 8 到 20 个字符', trigger: 'blur'}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      return request.post(\"http://localhost:8080/user/login\", this.sizeForm)\r\n          .then(result => {\r\n            let jwt = result.data;\r\n            //后端返回的信息(用户ID)\r\n            let msg = result.msg;\r\n            //登录成功,保存登录之后的令牌和用户名,以及用户ID和账号类型\r\n            if (jwt != null) {\r\n              localStorage.setItem(\"token\", jwt);\r\n              localStorage.setItem(\"userInfo\", JSON.stringify({\r\n                'userName': this.sizeForm.userName,\r\n                'userID': parseInt(msg),\r\n                \"accountType\": this.sizeForm.accountType\r\n              }))\r\n              //网页重定向到个人空间\r\n              this.$message.success(\"登录成功，已进入个人空间\")\r\n              this.$router.push(\"/userSpace\")\r\n            } else {\r\n              this.$message.error(\"登录失败，请检查输入数据\")\r\n            }\r\n          })\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n\r\n.login-container {\r\n  width: 90%;\r\n  height: 75%;\r\n  border-radius: 10px;\r\n  margin: 0px 0px;\r\n  padding: 20px 20px 10px 20px;\r\n  text-align: left;\r\n}\r\n\r\n.login-item {\r\n//width: 100%; //height: 100px\r\n}\r\n\r\n\r\n</style>"],"mappings":";AAsBA,OAAAA,OAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,QAAA;QACAC,QAAA;QACAC,WAAA;MACA;MACAC,KAAA;QACAH,QAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,QAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,SAAA;MACA,OAAAb,OAAA,CAAAc,IAAA,0CAAAZ,QAAA,EACAa,IAAA,CAAAC,MAAA;QACA,IAAAC,GAAA,GAAAD,MAAA,CAAAf,IAAA;QACA;QACA,IAAAiB,GAAA,GAAAF,MAAA,CAAAE,GAAA;QACA;QACA,IAAAD,GAAA;UACAE,YAAA,CAAAC,OAAA,UAAAH,GAAA;UACAE,YAAA,CAAAC,OAAA,aAAAC,IAAA,CAAAC,SAAA;YACA,iBAAApB,QAAA,CAAAC,QAAA;YACA,UAAAoB,QAAA,CAAAL,GAAA;YACA,oBAAAhB,QAAA,CAAAG;UACA;UACA;UACA,KAAAmB,QAAA,CAAAC,OAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;UACA,KAAAH,QAAA,CAAAI,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}